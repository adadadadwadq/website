<script>
async function loadStatus() {
  try {
    const response = await fetch('status.json');
    const data = await response.json();

    const servicesDiv = document.getElementById('services');
    servicesDiv.innerHTML = '';

    data.services.forEach(service => {
      let color = '#777', emoji = 'âšª';
      switch(service.status){
        case 'online': color='#43b581'; emoji='ðŸŸ¢'; break;
        case 'minor': color='#faa61a'; emoji='ðŸŸ¡'; break;
        case 'outage': color='#f04747'; emoji='ðŸ”´'; break;
      }

      const serviceBox = document.createElement('div');
      serviceBox.style.background = color;
      serviceBox.style.color = 'white';
      serviceBox.style.padding = '10px 16px';
      serviceBox.style.borderRadius = '8px';
      serviceBox.style.marginBottom = '8px';
      serviceBox.innerText = `${emoji} ${service.name}: ${service.message}`;

      servicesDiv.appendChild(serviceBox);
    });

    // History
    const historyUl = document.getElementById('status-history');
    historyUl.innerHTML = '';
    data.history.forEach(item => {
      const li = document.createElement('li');
      li.innerText = `ðŸ”¹ [${item.time}] ${item.status.toUpperCase()}: ${item.message}`;
      historyUl.appendChild(li);
    });

  } catch(err) {
    console.error('Failed to load status:', err);
  }
}

loadStatus();
setInterval(loadStatus, 30000);
</script>
